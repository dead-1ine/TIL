# DAG 소개와 기본 구조

## DAG란

Airflow에서 실행할 작업들을 순서에 맞게 구성한 워크플로우를 의미한다.

DAG를 구성하는 각 작업들을 Task라고 한다.

연결된 화살표 방향 순서대로 태스크를 실행하고, 분기 실행과 병렬 실행이 가능하다.





## DAG 코드 구조

| 구분                 | 내용                                                         |
| -------------------- | ------------------------------------------------------------ |
| 라이브러리 임포트    | DAG와 워크플로우 구성에 필요한 라이브러리 선언               |
| 공통 변수 정의       | DAG 구성에 사용하기 위해 공통으로 사용하는 변수를 정의, 변경이 자주 발생하는 경우 Variables 기능 활용 |
| DAG 공통 속성값 정의 | DAG를 정의하는데 필요한 공통 속성값 정의                     |
| DAG 정의             | DAG를 선언하고 공통 속성값을 전달                            |
| Task 정의            | DAG에 포함될 각 Task 정의, Operator, Sensor, Hook 등을 사용  |
| Task 배열            | 각 Task들의 순서를 나열, <<, >> 와 같은 Shift 연산자를 사용, set_upstream, set_downstream 함수도 사용 가능 |



 ## Task 정의

Task는 Operator, Sensor, Hook 등을 사용할 수 있다.

- 지정 작업을 수행하는 Operator를 대부분의 상황에서 사용한다.
- Sensor는 어떤 결과를 만족하는지 주기적으로 체크할때 사용한다.
- Hook는 DB나 서비스와 같은 외부 시스템과 통신하기 위한 인터페이스를 제공하며 연결 상태를 유지한다.



## Task 배열

단순한 작업의 경우 아래와 같이 정의하면 순차적으로 Task가 실행된다.

```python
task1 >> task2 >> task3
```

다음과 같이 병렬 실행도 가능하다.

```python
task1 >> [task2, task3] >> task4
```



