# Scheduler

스케줄러는 여러 가지 역할을 수행한다.

- DAG 파일의 구문을 분석하고 추출된 정보를 데이터베이스에 저장
- 실행할 준비가 된 태스크를 결정하고 이를 대기 상태로 전환
- 대기 상태에서 태스크 가져오기 실행



스케줄러는 DAG 디렉터리(`AIRFLOW__CORE__DAGS_FOLDER`에서 설정한 디렉터리)의 파이썬 파일을 주기적으로 처리한다. 즉, DAG 파일이 변경되지 않은 경우에도 주기적으로 각 DAG 파일을 확인하며, 만약 새롭게 추가된 DAG가 있으면 Airflow 메타스토어에 등록하는 역할을 수행한다.

DAG를 처리하기 위해서는 처리 능력이 필요하다. DAG 파일을 더 많이 재처리할 수록 변경사항이 더 빨리 확인되지만 더 많은 CPU 성능이 요구된다. DAG가 동적으로 변경되지 않는 경우에는 재처리 간격을 늘려 CPU의 사용량을 줄이는 것이 효과적이다. 



- DAG 처리와 관련된 Airflow 구성 옵션

| 구성항목                                        | 설명                                                         |
| ----------------------------------------------- | ------------------------------------------------------------ |
| `AIRFLOW__SCHEDULER__PROCESSOR_POLL_INTERVAL`   | 스케줄러 루프를 완료한 후 대기하는 시간이다. 스케줄러 루프 내에서 DAG의 구문이 분석되므로 이 숫자가 낮은 DAG가 더 빨리 구문을 분석한다. |
| `AIRFLOW__SCHEDULER__MIN_FILE_PROCESS_INTERVAL` | 파일이 처리되는 최소 간격(기본: 0). 이 간격으로 파일이 처리된다는 보장은 없다. 실제 스케줄러 처리 시간이 아닌 최소한 이 정도 간격으로 실행되어야 한다는 하한선을 설정하는 것이다. |
|                                                 |                                                              |
|                                                 |                                                              |

