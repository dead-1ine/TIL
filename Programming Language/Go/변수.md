# Go - 변수

Go에는 변수를 선언하는 다양한 방법이 있다. 변수를 선언하는 방법으로 var 키워드를 사용한다.

```go
var x int = 10
```

=의 오른쪽에 있는 10의 타입이 예상되는 변수 타입인 경우는 =의 왼쪽에 있는 타입을 생략할 수 있다.

```go
var x = 10
```

반대로 변수를 선언하고 해당 변수에 제로 값을 할당하고 싶다면, 타입을 유지하고 = 이후의 내용만 빼면 된다.

```go
var x int
```

한 번의 var 라인으로 같은 타입으로 여러 개의 변수를 선언할 수도 있다.

```go
var x, y int = 10, 20
```

같은 타입의 모든 변수에 제로 값을 할당할 수 있다.

```go
var x, y int
```

혹은 서로 다른 타입을 선언할 수도 있다.

```go
var x, y = 10, "Hello"
```



var를 사용하는 또 다른 방법이 있다. 다양한 변수를 한 번에 선언하고자 한다면, 선언 리스트를 괄호로 묶어 사용할 수 있다.

```go
var (
	x int
    y = 20
    z int = 30
    d, e = 40, "Hello"
    f, g string
)
```

또한 Go는 짧은 선언도 지원한다. 함수 내에서 := 연산자를 사용해 타입을 유추하는 var 선언을 대체할 수 있다. 아래 두 라인의 코드는 정확히 같은 동작을 수행한다.

```go
var x = 10
x := 10
```

var와 마찬가지로 := 연산자를 사용하여 다양한 변수를 한 번에 선언할 수 있다.

```go
var x, y = 10, "hello"
x, y := 10, "hello"
```

:= 연산자는 var로 할 수 없는 한 가지 기능이 있다. 이미 선언된 변수에 값을 할당할 수 있다는 것이다. 새로 선언하는 변수가 := 연산자 왼쪽에 하나만 있으면, 다른 변수들은 이미 존재하는 변수라도 값이 할당된다.

```go
x := 10
x, y := 30, "hello"
```

:=에도 한 가지 제한이 있다. 패키지 레벨에서 변수를 선언하고자 한다면, := 연산자의 사용은 함수 밖에서는 불가능하기 때문에 반드시 var 키워드를 사용해야 한다.(?)

함수 내에서 가장 흔한 선언 방법은 :=을 사용하는 것이다. 함수 밖에는 패키지 레벨에서 접근하는 변수들의 경우는 드물지만 선언 리스트를 사용하자.

함수 내에서 := 연산자 사용을 피해야 하는 상황들이 있다.

- 제로 값으로 변수를 초기화할 때, var x int와 같이 사용하자. 의도한 제로 값이 할당될 수 있도록 하기 위함이다.
- 타입이 지정되지 않은 상수나 리터럴이 변수에 할당될 때, 타입을 지정할 수 있는 var 형식을 사용하자. 타입 변환을 사용하여 값의 타입을 지정하고 := 연산자를 사용하여 x := byte(20)과 같이 사용하는 것은 문제는 없지만, var x byte = 20으로 사용하는 것이 관용적인 코드를 만들 수 있다.
- := 연산자는 새로운 변수나 이미 존재하는 변수에 모두 값을 할당하기 때문에, 이미 있는 변수에 값을 할당하려고 의도했던 것이 새로운 변수를 만들게 되는 경우가 발생한다. 이런 상황에서 명시적으로 var 키워드를 사용하여 변수를 새로운 선언으로 명확히 한다면, 이미 있던 변수나 새로운 변수 모두에 할당 연산자(=)를 사용할 수 있다.

var 와 :=는 같은 라인에 여러 변수를 선언할 수 있지만, 이런 스타일은 함수나 콤마 OK 관용구에서 반환된 여러 값을 할당 때만 이런 스타일을 사용하자.

패키지 블록이라 불리는 범위내에서 함수 외부에 변수를 선언하는 것은 없다. 값의 변경이 일어나는 패키지 레벨 변수는 좋지 않다. 함수 외부에 변수가 있을 때, 변수의 변경 사항을 추적하기가 어려울 수 있어 프로그램의 데이터 흐름을 이해하기 어려워진다. 이것은 미묘한 버그로 이어질 수 있다. 패키지 블록 내에서는 사실상 변경 불가능한 변수 선언만 해야 한다.

### 2.3 const 사용

```go
const x int64 = 10

const (
	idKey = "id"
    nameKey = "name"
)

const z = 20 * 10

func main() {
    const y = "hello"
    
    fmt.Println(x)
    fmt.Println(y)
    
    x = x + 1
    y = "bye"
    
    fmt.Println(x)
    fmt.Println(y)
}
```

```linux
./const.go:20:4: cannot assign to x
./const.go:21:4: cannot assign to y
```

