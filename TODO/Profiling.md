### 개요

---

>   프로파일링 또는 성능 분석이란, 프로그램의 시간 복잡도 및 공간(메모리), 특정 명령어 이용, 함수 호출의 주기와 빈도 등을 측정하는 동적 프로그램 분석의 한 형태이다. 
>
>   -   프로파일링 정보는 보통 프로그램 최적화를 보조하기 위해 사용된다. 
>   -   프로파일링은 프로파일러라는 도구를 사용하여 프로그램 소스 코드나 이진 실행 파일을 계측 분석함으로써 수행한다.
>   -   프로파일러 : 프로파일링을 도와주는 도구로, 프로그램에서 사용되는 함수가 몇 번 사용되고 얼마나 많은 시간을 차지하는 지 측정한다.



### Python에서의 프로파일링

---

-   파이썬 코드를 작성하다 보면 성능 최적화를 위해 코드의 실행 시간을 정확히 측정하고 싶을 때가 있다.



time 모듈을 이용해 시간 성능 저하가 예상되는 부분의 실행 시간을 직접 측정할 수 있지만, 요소별로 실행 시간을 측정하기 불편하고, 무엇보다 파이썬의 동적인 특성으로 인해 예상되는 지연 구간과 실제 지연이 일어나는 부분이 다를 수 있는 문제가 있다.

-   따라서 프로그램을 실행시켰을 때 각 코드가 얼마동안 실행하였는지 알려주는 **프로파일러**를 사용해 최적화가 필요한 부분을 우선적으로 검토하는 것으로 효율적인 성능 개선에 도움이 될 것이다.

-   Profile 객체의 인스턴스를 생성하고, runcall 메서드를 사용해 test함수를 프로파일링했다.
-   runcall 메서드는 단일 함수의 프로파일링에 사용할 수 있는 기능이다.

```python
from cProfile import Profile

profiler = Profile()
profiler.runcall(test)
```



-   커맨드 라인 단위로 프로파일링을 수행하고 싶다면, run과 같은 메서드를 이용할 수 있다.

    ```python
    from cProfile import Profile
    
    profiler = Profile()
    profiler.run('test()')
    ```

    

-   위와 같이 수행된 프로파일링 결과는 바로 볼 수 없다. 아래와 같이 기본 모듈인 pstats를 추가로 사용하여 성능 통계 값을 원하는 대로 정렬, 선별하여 출력할 수 있다. 

    ```python
    from pstats import Stats
    
    stats = Stats(profiler)
    stats.strip_dirs()
    stats.sort_stats('cumulative')
    stats.print_stats()
    ```

    